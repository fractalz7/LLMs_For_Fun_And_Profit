{
  "nbformat": 4,
  "nbformat_minor": 0,
  "metadata": {
    "colab": {
      "provenance": []
    },
    "kernelspec": {
      "name": "python3",
      "display_name": "Python 3"
    },
    "language_info": {
      "name": "python"
    },
    "widgets": {
      "application/vnd.jupyter.widget-state+json": {
        "00b1d54e57c64ccaa842cad93f5d7ae8": {
          "model_module": "@jupyter-widgets/output",
          "model_name": "OutputModel",
          "model_module_version": "1.0.0",
          "state": {
            "_dom_classes": [],
            "_model_module": "@jupyter-widgets/output",
            "_model_module_version": "1.0.0",
            "_model_name": "OutputModel",
            "_view_count": null,
            "_view_module": "@jupyter-widgets/output",
            "_view_module_version": "1.0.0",
            "_view_name": "OutputView",
            "layout": "IPY_MODEL_0bfa9f419c9746eaa58c519621c61f95",
            "msg_id": "",
            "outputs": [
              {
                "output_type": "stream",
                "name": "stdout",
                "text": [
                  "The \"Monetary Policy Report\" released by the Board of Governors of the Federal Reserve System offers a comprehensive assessment of the current economic landscape, with a particular focus on inflation, employment trends, and monetary policy decisions. The report highlights that while inflation has softened from previous peaks, it remains elevated, with the Price Index for Personal Consumption Expenditures (PCE) rising by 2.4 percent over the past year. Wage growth has moderated but continues to be robust, contributing to increased purchasing power for workers amidst lingering inflation concerns. The Federal Reserve anticipates the policy rate to rise to around 4.6 percent post-March 2024 and to 3.7 percent by the end of 2025, reflecting a tightening monetary policy stance. The report also delves into the nuances of the housing market, where low mortgage rates have influenced buying behaviors and impacted supply dynamics.\n",
                  "\n",
                  "In terms of market analysis, the document outlines the competitiveness, growth rates, and market size, which are vital indicators for assessing investment opportunities. Additionally, the company overview section introduces the business under scrutiny, encompassing its history, product/service offerings, and market positioning. Financial performance metrics such as revenue, expenses, and profit margins are scrutinized to gauge the company's operational efficiency and financial health. A SWOT analysis provides further insights into the company's internal strengths and weaknesses, as well as external opportunities and threats. Risk factors, especially those affecting regulatory environments and economic conditions, are meticulously examined to understand potential vulnerabilities. Growth strategies recommended in the report aim to propel the company towards future success, be it through market expansion, innovation, or strategic partnerships. The investment recommendation section synthesizes the analysis into actionable guidance, advising on whether to buy, hold, or sell the company's stock based on the prevailing market conditions.\n",
                  "\n",
                  "The report touches upon significant trends like advancements in technology and their impact on productivity growth and economic outlook. Moreover, observations on real estate dynamics shed light on the interplay between low mortgage rates, housing demand, and supply constraints, influencing buyer behavior and pricing trends. These trends underscore the importance of staying attuned to technological advancements and market shifts for making informed investment decisions. The detailed analysis provided in the document offers valuable insights for investors and policymakers alike, aiding in navigating the complexities of the evolving economic landscape.\n"
                ]
              }
            ]
          }
        },
        "0bfa9f419c9746eaa58c519621c61f95": {
          "model_module": "@jupyter-widgets/base",
          "model_name": "LayoutModel",
          "model_module_version": "1.2.0",
          "state": {
            "_model_module": "@jupyter-widgets/base",
            "_model_module_version": "1.2.0",
            "_model_name": "LayoutModel",
            "_view_count": null,
            "_view_module": "@jupyter-widgets/base",
            "_view_module_version": "1.2.0",
            "_view_name": "LayoutView",
            "align_content": null,
            "align_items": null,
            "align_self": null,
            "border": "1px solid black",
            "bottom": null,
            "display": null,
            "flex": null,
            "flex_flow": null,
            "grid_area": null,
            "grid_auto_columns": null,
            "grid_auto_flow": null,
            "grid_auto_rows": null,
            "grid_column": null,
            "grid_gap": null,
            "grid_row": null,
            "grid_template_areas": null,
            "grid_template_columns": null,
            "grid_template_rows": null,
            "height": null,
            "justify_content": null,
            "justify_items": null,
            "left": null,
            "margin": null,
            "max_height": null,
            "max_width": null,
            "min_height": null,
            "min_width": null,
            "object_fit": null,
            "object_position": null,
            "order": null,
            "overflow": null,
            "overflow_x": null,
            "overflow_y": null,
            "padding": null,
            "right": null,
            "top": null,
            "visibility": null,
            "width": null
          }
        }
      }
    }
  },
  "cells": [
    {
      "cell_type": "markdown",
      "source": [
        "**Author:** Ronny Ashar\n",
        "<br>\n",
        "**Date:** May 2024\n",
        "<br>\n",
        "**Description:** this notebook demonstrates using OpenAI and some basic prompt engineering for document summarization. Since we want to be able to summarize large documents which may exceed the token limits of some models, we summarize in chunks a few pages at a time, and then consolidate those into a final report\n",
        "<br>\n",
        "**Note:** some code copied and modified from #StanfordTech16 examples\n"
      ],
      "metadata": {
        "id": "iFtntBKaKWxy"
      }
    },
    {
      "cell_type": "code",
      "execution_count": 1,
      "metadata": {
        "id": "E7a4rVv22KLW",
        "colab": {
          "base_uri": "https://localhost:8080/"
        },
        "outputId": "d43c5875-5425-426d-cf77-ef67dec1104a"
      },
      "outputs": [
        {
          "output_type": "stream",
          "name": "stdout",
          "text": [
            "Requirement already satisfied: openai in /usr/local/lib/python3.12/dist-packages (1.101.0)\n",
            "Requirement already satisfied: anyio<5,>=3.5.0 in /usr/local/lib/python3.12/dist-packages (from openai) (4.10.0)\n",
            "Requirement already satisfied: distro<2,>=1.7.0 in /usr/local/lib/python3.12/dist-packages (from openai) (1.9.0)\n",
            "Requirement already satisfied: httpx<1,>=0.23.0 in /usr/local/lib/python3.12/dist-packages (from openai) (0.28.1)\n",
            "Requirement already satisfied: jiter<1,>=0.4.0 in /usr/local/lib/python3.12/dist-packages (from openai) (0.10.0)\n",
            "Requirement already satisfied: pydantic<3,>=1.9.0 in /usr/local/lib/python3.12/dist-packages (from openai) (2.11.7)\n",
            "Requirement already satisfied: sniffio in /usr/local/lib/python3.12/dist-packages (from openai) (1.3.1)\n",
            "Requirement already satisfied: tqdm>4 in /usr/local/lib/python3.12/dist-packages (from openai) (4.67.1)\n",
            "Requirement already satisfied: typing-extensions<5,>=4.11 in /usr/local/lib/python3.12/dist-packages (from openai) (4.15.0)\n",
            "Requirement already satisfied: idna>=2.8 in /usr/local/lib/python3.12/dist-packages (from anyio<5,>=3.5.0->openai) (3.10)\n",
            "Requirement already satisfied: certifi in /usr/local/lib/python3.12/dist-packages (from httpx<1,>=0.23.0->openai) (2025.8.3)\n",
            "Requirement already satisfied: httpcore==1.* in /usr/local/lib/python3.12/dist-packages (from httpx<1,>=0.23.0->openai) (1.0.9)\n",
            "Requirement already satisfied: h11>=0.16 in /usr/local/lib/python3.12/dist-packages (from httpcore==1.*->httpx<1,>=0.23.0->openai) (0.16.0)\n",
            "Requirement already satisfied: annotated-types>=0.6.0 in /usr/local/lib/python3.12/dist-packages (from pydantic<3,>=1.9.0->openai) (0.7.0)\n",
            "Requirement already satisfied: pydantic-core==2.33.2 in /usr/local/lib/python3.12/dist-packages (from pydantic<3,>=1.9.0->openai) (2.33.2)\n",
            "Requirement already satisfied: typing-inspection>=0.4.0 in /usr/local/lib/python3.12/dist-packages (from pydantic<3,>=1.9.0->openai) (0.4.1)\n"
          ]
        }
      ],
      "source": [
        "!pip install openai"
      ]
    },
    {
      "cell_type": "markdown",
      "source": [
        "will need an OpenAI account to authenticate and use API Key\n",
        "refer to this documentation for setup instructions: https://platform.openai.com/docs/api-reference/introduction"
      ],
      "metadata": {
        "id": "ntZ-Bop-MkkZ"
      }
    },
    {
      "cell_type": "code",
      "source": [
        "from google.colab import userdata\n",
        "api_key = userdata.get('open_ai_key')"
      ],
      "metadata": {
        "id": "yXdcxZqJ2zR2"
      },
      "execution_count": 2,
      "outputs": []
    },
    {
      "cell_type": "code",
      "source": [
        "!pip install pypdf"
      ],
      "metadata": {
        "colab": {
          "base_uri": "https://localhost:8080/"
        },
        "id": "uQETWOJ8Hdfk",
        "outputId": "2612ca9b-bb8d-4731-ff8f-16cb1cf460f6"
      },
      "execution_count": 3,
      "outputs": [
        {
          "output_type": "stream",
          "name": "stdout",
          "text": [
            "Collecting pypdf\n",
            "  Downloading pypdf-6.0.0-py3-none-any.whl.metadata (7.1 kB)\n",
            "Downloading pypdf-6.0.0-py3-none-any.whl (310 kB)\n",
            "\u001b[?25l   \u001b[90m━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━\u001b[0m \u001b[32m0.0/310.5 kB\u001b[0m \u001b[31m?\u001b[0m eta \u001b[36m-:--:--\u001b[0m\r\u001b[2K   \u001b[90m━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━\u001b[0m \u001b[32m310.5/310.5 kB\u001b[0m \u001b[31m16.5 MB/s\u001b[0m eta \u001b[36m0:00:00\u001b[0m\n",
            "\u001b[?25hInstalling collected packages: pypdf\n",
            "Successfully installed pypdf-6.0.0\n"
          ]
        }
      ]
    },
    {
      "cell_type": "code",
      "source": [
        "from openai import OpenAI\n",
        "import requests"
      ],
      "metadata": {
        "id": "aXBqpbwB6MVN"
      },
      "execution_count": 4,
      "outputs": []
    },
    {
      "cell_type": "code",
      "source": [
        "client = OpenAI(api_key=api_key)"
      ],
      "metadata": {
        "id": "zdcy2vRxAizl"
      },
      "execution_count": 5,
      "outputs": []
    },
    {
      "cell_type": "markdown",
      "source": [
        "We'll download the Federal Reserve's Monetory Policy Report which is a 71 page document, then use chunking to generate summaries for 5-page chunks, and then consolidate into a final report. In case of smaller documents chunking is not needed"
      ],
      "metadata": {
        "id": "YCwzRNKXNMim"
      }
    },
    {
      "cell_type": "code",
      "source": [
        "!curl  -o fed_notes.pdf https://www.federalreserve.gov/publications/files/20240301_mprfullreport.pdf"
      ],
      "metadata": {
        "colab": {
          "base_uri": "https://localhost:8080/"
        },
        "id": "VQygtamoKz2y",
        "outputId": "d0a1453b-0c1c-4f8c-c7ba-5aeb623a5727"
      },
      "execution_count": 6,
      "outputs": [
        {
          "output_type": "stream",
          "name": "stdout",
          "text": [
            "  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current\n",
            "                                 Dload  Upload   Total   Spent    Left  Speed\n",
            "100 5081k  100 5081k    0     0  11.5M      0 --:--:-- --:--:-- --:--:-- 11.5M\n"
          ]
        }
      ]
    },
    {
      "cell_type": "code",
      "source": [
        "def summarize_document(document):\n",
        "    # Call OpenAI API for summarization\n",
        "\n",
        "      summary = client.chat.completions.create(\n",
        "          model = \"gpt-3.5-turbo\",\n",
        "          #temperature=0.9,\n",
        "          #max_tokens=500,\n",
        "          messages = [\n",
        "              {\"role\": \"system\", \"content\": \"You are an analyst at Golamn Sachs summarizing sections of a document for a report your team will send to a managing director. Please summarize and be sure to include all relevant details\"},\n",
        "              {\"role\": \"user\", \"content\": document}\n",
        "          ]\n",
        "      )\n",
        "\n",
        "      return summary"
      ],
      "metadata": {
        "id": "Rcrt1XjlXQTH"
      },
      "execution_count": 7,
      "outputs": []
    },
    {
      "cell_type": "code",
      "source": [
        "from pypdf import PdfReader\n",
        "\n",
        "reader = PdfReader(\"fed_notes.pdf\")\n",
        "num_pages = len(reader.pages)"
      ],
      "metadata": {
        "id": "2INHUBoK5Q78"
      },
      "execution_count": 8,
      "outputs": []
    },
    {
      "cell_type": "code",
      "source": [
        "def getText(reader, start_page, end_page):\n",
        "      consolidated_text=''\n",
        "      for num in range(start_page, end_page+1):\n",
        "        page = reader.pages[start_page]\n",
        "        text = page.extract_text()\n",
        "        consolidated_text += text\n",
        "      return consolidated_text"
      ],
      "metadata": {
        "id": "MlV6UWJgNaPy"
      },
      "execution_count": 9,
      "outputs": []
    },
    {
      "cell_type": "markdown",
      "source": [
        "Note: below cell page range loop generated by ChatGPT, then I mad eminor edit to insert in the call to my summarize_document function"
      ],
      "metadata": {
        "id": "SEHjrP8ROrgF"
      }
    },
    {
      "cell_type": "code",
      "source": [
        "total_pages = num_pages\n",
        "pages_per_batch = 5\n",
        "\n",
        "summaries = ''\n",
        "for i in range(0, total_pages, pages_per_batch):\n",
        "    start_page = i\n",
        "    end_page = min(i + pages_per_batch - 1, total_pages)\n",
        "    print(f\"Summarizing pages {start_page} to {end_page}\")\n",
        "    summary = summarize_document(getText(reader, start_page, end_page))\n",
        "    summaries += (summary.choices[0].message.content)"
      ],
      "metadata": {
        "colab": {
          "base_uri": "https://localhost:8080/"
        },
        "id": "Pa3hcfDLLDSJ",
        "outputId": "090d1285-f0c0-4ba2-82eb-33119c575921"
      },
      "execution_count": 10,
      "outputs": [
        {
          "output_type": "stream",
          "name": "stdout",
          "text": [
            "Summarizing pages 0 to 4\n",
            "Summarizing pages 5 to 9\n",
            "Summarizing pages 10 to 14\n",
            "Summarizing pages 15 to 19\n",
            "Summarizing pages 20 to 24\n",
            "Summarizing pages 25 to 29\n",
            "Summarizing pages 30 to 34\n",
            "Summarizing pages 35 to 39\n",
            "Summarizing pages 40 to 44\n",
            "Summarizing pages 45 to 49\n",
            "Summarizing pages 50 to 54\n",
            "Summarizing pages 55 to 59\n",
            "Summarizing pages 60 to 64\n",
            "Summarizing pages 65 to 69\n",
            "Summarizing pages 70 to 71\n"
          ]
        }
      ]
    },
    {
      "cell_type": "markdown",
      "source": [
        "In the below cell we simply take the concatenated summaries and use the exact original prompt to have is do the consolidated summarization. We can contrast that with a few cells below where we provide more specific instructions regarding the format and length of consolidated report"
      ],
      "metadata": {
        "id": "XiWflolKPd3e"
      }
    },
    {
      "cell_type": "code",
      "source": [
        "consolidated_summary=summarize_document(summaries)"
      ],
      "metadata": {
        "id": "2x9UZt-BRNBL"
      },
      "execution_count": 11,
      "outputs": []
    },
    {
      "cell_type": "code",
      "source": [
        "print(consolidated_summary.choices[0].message.content)"
      ],
      "metadata": {
        "colab": {
          "base_uri": "https://localhost:8080/"
        },
        "id": "LUHChZmsS_Ft",
        "outputId": "2af53261-12eb-48b9-a8b4-fb1c86b41708"
      },
      "execution_count": 12,
      "outputs": [
        {
          "output_type": "stream",
          "name": "stdout",
          "text": [
            "Summary:\n",
            "\n",
            "The \"Monetary Policy Report\" prepared by the Board of Governors of the Federal Reserve System provides an extensive overview of key economic indicators as of 11:00 a.m. EST on March 1, 2024. The report indicates that while inflation has eased, it remains elevated, with the PCE price index rising 2.4% over the prior 12 months. Wage growth has slowed but remains elevated, with total hourly compensation up by 4.2% in the same period. The document also discusses developments in the housing market, pointing out constraints in the existing home market leading to increased interest in new homes.\n",
            "\n",
            "Moreover, the report details the Federal Reserve's projections for the policy rate, foreseeing an increase to about 4.6% following the March 2024 FOMC meeting. Yields on long-term U.S. nominal Treasury securities have seen significant fluctuations, reaching about 4.4% by late February. Bank credit growth decelerated due to higher interest rates and tighter credit availability, while delinquency rates for bank loans increased in the second half of 2023.\n",
            "\n",
            "The FOMC has maintained the federal funds rate target range of 5¼ to 5½ percent since July 2023, anticipating no further increases until inflation moves sustainably towards 2%. Additionally, the document discusses the Federal Reserve's deferred asset, which has increased to $152 billion, impacting future remittances to the Treasury. Projections for real GDP growth, unemployment rate, inflation, and the federal funds rate suggest a moderated outlook compared to prior assessments.\n",
            "\n",
            "Furthermore, uncertainty and risks in projections of PCE inflation are emphasized in the report, with fan charts demonstrating participants' assessments of potential outcomes. Overall, the Monetary Policy Report offers critical insights into current economic conditions, Federal Reserve policies, and potential future directions, guiding policymakers' decisions and market expectations. As an analyst at Goldman Sachs, it is crucial to consider these insights when assessing market trends, investment opportunities, and risks in the economic landscape.\n"
          ]
        }
      ]
    },
    {
      "cell_type": "code",
      "source": [
        "len(consolidated_summary.choices[0].message.content)"
      ],
      "metadata": {
        "colab": {
          "base_uri": "https://localhost:8080/"
        },
        "id": "3vU38vDoQAHO",
        "outputId": "5ea571dc-735e-464e-ed9a-1da1afd3624a"
      },
      "execution_count": 13,
      "outputs": [
        {
          "output_type": "execute_result",
          "data": {
            "text/plain": [
              "2102"
            ]
          },
          "metadata": {},
          "execution_count": 13
        }
      ]
    },
    {
      "cell_type": "markdown",
      "source": [
        "In the below cell our prompt is a bit more specific, asking for a 3-page summary"
      ],
      "metadata": {
        "id": "sVzQ3RY0QE7H"
      }
    },
    {
      "cell_type": "code",
      "source": [
        "summary_report = client.chat.completions.create(\n",
        "    model = \"gpt-3.5-turbo\",\n",
        "    #temperature=0.9,\n",
        "    #max_tokens=500,\n",
        "    messages = [\n",
        "        {\"role\": \"system\", \"content\": \"You are an analyst at Golamn Sachs preparing a consoliated summary report to send to a managing director. \\\n",
        "        You have already summarized sections of the 71-page report, highlighting significant details. You can now take those notes and collate \\\n",
        "        into a comprehensive report, including relevant details, preferably a short paragraph on significant trends such as technology or real estate.\\\n",
        "        Remember the MD is already very familiar with what goes into these reports year on year, make sure the summary you generate is meaningful for this savvy audience!!\\\n",
        "        Make sure the summary is at least 10 pages or 7500 word length! Be certain to include numeric data such as actual rate increase forecasts or\\\n",
        "        inflation percentages!\"},\n",
        "        {\"role\": \"user\", \"content\": summaries}\n",
        "    ]\n",
        ")"
      ],
      "metadata": {
        "id": "rRKhgw1rYLqc"
      },
      "execution_count": 14,
      "outputs": []
    },
    {
      "cell_type": "code",
      "source": [
        "from ipywidgets import widgets\n",
        "out = widgets.Output(layout={'border': '1px solid black'})"
      ],
      "metadata": {
        "id": "p8FphrdASqLN"
      },
      "execution_count": 15,
      "outputs": []
    },
    {
      "cell_type": "code",
      "source": [
        "with out:\n",
        "  print(summary_report.choices[0].message.content)\n",
        "\n",
        "out"
      ],
      "metadata": {
        "id": "FlbfGsAgLlgF",
        "colab": {
          "base_uri": "https://localhost:8080/",
          "height": 356,
          "referenced_widgets": [
            "00b1d54e57c64ccaa842cad93f5d7ae8",
            "0bfa9f419c9746eaa58c519621c61f95"
          ]
        },
        "outputId": "91cae8e4-c652-49fc-ff59-3dd7428056c8"
      },
      "execution_count": 16,
      "outputs": [
        {
          "output_type": "display_data",
          "data": {
            "text/plain": [
              "Output(layout=Layout(border='1px solid black'))"
            ],
            "application/vnd.jupyter.widget-view+json": {
              "version_major": 2,
              "version_minor": 0,
              "model_id": "00b1d54e57c64ccaa842cad93f5d7ae8"
            }
          },
          "metadata": {}
        }
      ]
    },
    {
      "cell_type": "code",
      "source": [
        "print(summary_report.choices[0].message.content)"
      ],
      "metadata": {
        "colab": {
          "base_uri": "https://localhost:8080/"
        },
        "id": "64cYlUNTmPG2",
        "outputId": "641f8b2a-9348-4c4f-9df9-acf26efc6d2f"
      },
      "execution_count": 17,
      "outputs": [
        {
          "output_type": "stream",
          "name": "stdout",
          "text": [
            "The \"Monetary Policy Report\" released by the Board of Governors of the Federal Reserve System offers a comprehensive assessment of the current economic landscape, with a particular focus on inflation, employment trends, and monetary policy decisions. The report highlights that while inflation has softened from previous peaks, it remains elevated, with the Price Index for Personal Consumption Expenditures (PCE) rising by 2.4 percent over the past year. Wage growth has moderated but continues to be robust, contributing to increased purchasing power for workers amidst lingering inflation concerns. The Federal Reserve anticipates the policy rate to rise to around 4.6 percent post-March 2024 and to 3.7 percent by the end of 2025, reflecting a tightening monetary policy stance. The report also delves into the nuances of the housing market, where low mortgage rates have influenced buying behaviors and impacted supply dynamics.\n",
            "\n",
            "In terms of market analysis, the document outlines the competitiveness, growth rates, and market size, which are vital indicators for assessing investment opportunities. Additionally, the company overview section introduces the business under scrutiny, encompassing its history, product/service offerings, and market positioning. Financial performance metrics such as revenue, expenses, and profit margins are scrutinized to gauge the company's operational efficiency and financial health. A SWOT analysis provides further insights into the company's internal strengths and weaknesses, as well as external opportunities and threats. Risk factors, especially those affecting regulatory environments and economic conditions, are meticulously examined to understand potential vulnerabilities. Growth strategies recommended in the report aim to propel the company towards future success, be it through market expansion, innovation, or strategic partnerships. The investment recommendation section synthesizes the analysis into actionable guidance, advising on whether to buy, hold, or sell the company's stock based on the prevailing market conditions.\n",
            "\n",
            "The report touches upon significant trends like advancements in technology and their impact on productivity growth and economic outlook. Moreover, observations on real estate dynamics shed light on the interplay between low mortgage rates, housing demand, and supply constraints, influencing buyer behavior and pricing trends. These trends underscore the importance of staying attuned to technological advancements and market shifts for making informed investment decisions. The detailed analysis provided in the document offers valuable insights for investors and policymakers alike, aiding in navigating the complexities of the evolving economic landscape.\n"
          ]
        }
      ]
    },
    {
      "cell_type": "code",
      "source": [
        "len(summary_report.choices[0].message.content)"
      ],
      "metadata": {
        "id": "pMPS08WaSV7c",
        "colab": {
          "base_uri": "https://localhost:8080/"
        },
        "outputId": "2aeceb48-41c9-4798-dd9d-8231b605cfcc"
      },
      "execution_count": 18,
      "outputs": [
        {
          "output_type": "execute_result",
          "data": {
            "text/plain": [
              "2743"
            ]
          },
          "metadata": {},
          "execution_count": 18
        }
      ]
    },
    {
      "cell_type": "code",
      "source": [
        "summary_report = client.chat.completions.create(\n",
        "    model = \"gpt-3.5-turbo\",\n",
        "    temperature=0.8,\n",
        "    #max_tokens=500,\n",
        "    messages = [\n",
        "        {\"role\": \"system\", \"content\": \"You are a professor trying to make a finance and economics class fun for your students. Please do a summary sonnet in the style of shakespeare\\\n",
        "        Be sure to include details on employment trends and interest rate forecasts!\"},\n",
        "        {\"role\": \"user\", \"content\": summaries}\n",
        "    ]\n",
        ")"
      ],
      "metadata": {
        "id": "DOgcyR7hQhpL"
      },
      "execution_count": 19,
      "outputs": []
    },
    {
      "cell_type": "code",
      "source": [
        "print(summary_report.choices[0].message.content)\n"
      ],
      "metadata": {
        "colab": {
          "base_uri": "https://localhost:8080/"
        },
        "id": "Ig8EKQotfpsY",
        "outputId": "daec0da1-dc36-422c-e780-3b42a5ae5567"
      },
      "execution_count": 20,
      "outputs": [
        {
          "output_type": "stream",
          "name": "stdout",
          "text": [
            "Amidst the realms of finance and trade,  \n",
            "Where interests and markets do collide,  \n",
            "The Monetary Policy Report we bide,  \n",
            "To glean insights that guide our way.  \n",
            "\n",
            "Inflation's dance, a tale of highs and lows,  \n",
            "As PCE prices rise, yet still maintain,  \n",
            "Though oil and gas may wane and then regain,  \n",
            "The market's pulse, in ebbs and flows it shows.  \n",
            "\n",
            "Employment's narrative, a shifting scene,  \n",
            "Prime-age women rise to equal play,  \n",
            "Black workers find their highest gains in lean,  \n",
            "While Latinx labor stands not far away.  \n",
            "\n",
            "Interest rates forecast, a tale to tell,  \n",
            "With hikes and dips where money may excel.\n"
          ]
        }
      ]
    },
    {
      "cell_type": "code",
      "source": [
        "summary_report = client.chat.completions.create(\n",
        "    model = \"gpt-3.5-turbo\",\n",
        "    temperature=0.9,\n",
        "    #max_tokens=500,\n",
        "    messages = [\n",
        "        {\"role\": \"system\", \"content\": \"You are a Brown University undergrad, double majoring in literature and economics.\\\n",
        "        John Ashberry and Jeffrey Sachs are some of your heroes. Please do a summary vilanelle\\\n",
        "        Be sure to include details on employment trends and interest rate forecasts!\"},\n",
        "        {\"role\": \"user\", \"content\": summaries}\n",
        "    ]\n",
        ")"
      ],
      "metadata": {
        "id": "x1Z1mcsQlTyf"
      },
      "execution_count": 21,
      "outputs": []
    },
    {
      "cell_type": "code",
      "source": [
        "print(summary_report.choices[0].message.content)"
      ],
      "metadata": {
        "colab": {
          "base_uri": "https://localhost:8080/"
        },
        "id": "JJeYbC2tvvD8",
        "outputId": "ace5da03-754c-4b81-aaa1-f15e307466eb"
      },
      "execution_count": 22,
      "outputs": [
        {
          "output_type": "stream",
          "name": "stdout",
          "text": [
            "In Brown's halls, where Ashberry's lines do weave,\n",
            "A scholar blends the worlds of lit and econ,\n",
            "To craft a verse where fiscal insights cleave.\n",
            "\n",
            "At Goldman Sachs, the numbers interwoven,\n",
            "With words that dance like Sachs's grand design,\n",
            "In Brown's halls, where Ashberry's lines do weave.\n",
            "\n",
            "A summary Vilanelle, both soft and shriven,\n",
            "From the Monetary Policy Report's fine print,\n",
            "To craft a verse where fiscal insights cleave.\n",
            "\n",
            "The trends in work, employment's ebb and flow,\n",
            "Interest rates forecast, a tale untold,\n",
            "In Brown's halls, where Ashberry's lines do weave.\n",
            "\n",
            "From inflation's grasp to growth's bright glow,\n",
            "The document unveils a complex mold,\n",
            "To craft a verse where fiscal insights cleave.\n",
            "\n",
            "In markets' dance, uncertainties are sown,\n",
            "The poet-analyst finds the rhyme and reason,\n",
            "In Brown's halls, where Ashberry's lines do weave,\n",
            "To craft a verse where fiscal insights cleave.\n"
          ]
        }
      ]
    },
    {
      "cell_type": "code",
      "source": [],
      "metadata": {
        "id": "95lapgSGv0CN"
      },
      "execution_count": 22,
      "outputs": []
    }
  ]
}
